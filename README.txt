README

Accounting Transaction Download (ATD) can be used to obtain the General Ledger (gl) report,
with class IDs included in every transaction. The gl report is
essentially a list of all transactions, but the class IDs for each
transaction are not included with the report. The quickbooks example
code was modified slightly in order to execute the report on behalf
of all classes individually. This method provides a list of all
transactions in each specific class, with the class IDs in the
header, with just one report step.

Clone this repository, and make sure the latest version of php is
installed. In the "" directory is where you will find the code that I
modified, which is used by the php server to connect to quickbooks
and execute the report on your account. 


Prior to connecting ATD to your Quickbooks company, you must configure
your code and register the app on Quickbooks.


Navigating Quickbooks:

1) Create a developer account with Intui, using your company email
address. 2) Once you have created an Intuit Quickbooks Developer
account associated with your company, navigate to the Dashboard. 3)
From here, create a new app. Once you have named your app, navigate
to the app's page. 3) Here you will be provided with Development
Settings, which provide you with keys and credentials that your app
can use to access information about your "Sandbox Company", which is
a fake company generated by Quickbooks for you to test your code on.

NOTE: Though you "Create an App" in your account, the actual code for
the app is not online. In fact, this is more akin to "Registering an
App". Registering an app is neccesary in order to get your individual
API code approved. 

4) Obtain your keys and credentials, which are listed on the left hand
side of the app's page, either under development, or production if
the app is approved in the "Keys and Credentials" tab. This contains
the ClientID, the Client Secret, and the Redirect URI. The Client ID
and Client Secret are private keys that identify your app and enable
you to connect to your company. The client ID is the public ID of the
app and the Client Secret is private identification string. The ATD
code requires all three parameters to be accurate. The Redirect URI
is the location that Quickbooks redirects your web browser to after
connecting successfully with the app. The redirect URI listed here
should match your redirect in the code.

Accessing production keys: Until the app is approved by quickbooks,
you will only be able to access your sandbox company with ATD
under "Development". To start the approval process, navigate the to
the keys and credentials tab of your "Production Settings" and
complete the required tasks. Once these are completed you will have
access to the necessary keys for your real company.


ATD Configuration

NOTE: This code does not use any external package managers, like
composer. If you want to use composer, change the include
('../config.php') at the top of each file to the composer autoload
function. The include('../config.php') uses the autoloader config
file that acts as an SQL database query function. This is a way of
loading Quickbooks' functions, classes, variables, etc, that are
necessary for each piece of code. 


The following information is needed to configure your app:

1) Redirect URI: Found in the Quickbooks app settings. This must be
set in the atdconfig file. Copy paste your redirect URI in the single
quotation marks that follow this string in the obi config
file: 'oauth_redirect_uri' => Your redirect should be a web address
that contains your uri.php file, which acts as a temporary bridge
between Quickbooks online and php server's call back procedure. This
must match the URI listed in your Production (or development)
settings. The current URI is set so that you can host the php server
locally, and connect on your webserver locally. If you want to
separate the client from the server, see below.

2) Callback URI: This URI is user-dependent. It must be set in the
uri.php file. It redirects the web browser to send a GET request to
the PHP server to execute the callback procedure in ATD which
obtains the access code for the company. Insert the URI like this,
where the uri is between the single quotation marks : $b
= 'http://<ip address>:<port>/callback.php?>' The current URI is set
so that you can host the php server locally, and connect on your
webserver locally.

3) Home URI: This URI is user dependent, and is the same as the
callback URI with no call to a php file.  Copy paste your Home URI in
the single quotation marks that follow this string in the obi config
file: 'homeURI' => 'http://<ip address>:<port>' The Home URI is used
at the end of the callback procedure to redirect the web server to
the home page.The current URI is set so that you can host the php
server locally, and connect on your webserver locally.


2) baseURL: Determines the type of company the app is accessing. To
access a sandbox company, the string is "development". To access a
production company, the string is "production". Include either string
in your atdconfig file like this: 'baseUrl' => "production" 

Once the app has been approved, and you have configured your settings
as described above, you are ready to connect with your company.


Flow of steps for connection:

1) Install php, version 8.3 or greater.

2) Listen on PHP Server: Open a locally hosted php server in your
terminal within the ATD directory, using php -S <your ip
address>:<port to listen on>(ex: php -S 192.168.1.186:3000)

3) In your web browser, open a socket to this server by navigating to
<your ip address>:<port>

4) Submit your client ID and client Secret. You can access these in
your Development or Production settings of your app on Quickbooks.

5) Click Oath2 log in button, and log into your quickbooks account,
selecting the company you'd like to access. Your redirect URI will
bring the web server back to the index page.

6) Fill out report settings and save them.

7) Click "Generate Report". This will take about 20 seconds.

8) Download generated reports. 

Separating client from server: ATD is set up to host the PHP server
locally, and connect locally. If you want to host your PHP server on
another machine, you must change the following URIs: Callback URI,
Home URI, and the redirect URI. The atd_redirect file is currently
hosted online at the OSI website. This redirect file will always
redirect the server to the local host, in order to host the php
server on another machine do this: Alter the example atd_redirect
code in ATD to change the callback URI to your new IP address instead
of localhost. Find a website to host your atd_redirect code- the
address of the code is the new redirect URI. Copy paste this address
into your app settings online, and into the atd_config file. Then,
change your Home URI in your atd_config file to reflect the new IP
address.