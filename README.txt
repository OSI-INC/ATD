README Accounting Transaction Download (ATD) sample can be used to
obtain the General Ledger (gl) report, with class IDs included in
every transaction. The gl report is essentially a list of all
transactions, but the class IDs for each transaction are not included
with the report. The quickbooks example code was modified slightly in
order to execute the report on behalf of all classes individually.
This method provides a list of all transactions in each specific
class, with the class IDs in the header, with just one report step.


Prior to connecting ATD to your Quickbooks company, you must configure
your code and register the app on Quickbooks.

Registering the app: 

1) Create a developer account with Intuit, using your company email
address. 

2) Once you have created an Intuit Quickbooks Developer account
associated with your company, navigate to the Dashboard.

3) From here, create a new app. Though you "Create an App" in your
account, the actual code for the app is not online. In fact, this is
more akin to "Registering an App". Once you have named your app,
navigate to the app's page.

4) Here you will beprovided with Development Settings, which provide
you with keys and credentials that your app can use to access
information about your "Sandbox Company", which is a fake company
generated by Quickbooks for you to test your code on.

If you are interested in ATD for your Production company, you must
follow the App aproval procedure:

1) Click "Keys and Credentials" under the Production tab. 

2) A list ofto-do items will pop up. Fulfill all of these tasks in
order to retreive your company credentials. These tasks include
verifying your email address and completing your profile. The more
complicated tasks are described below.

3) Terms of service links: If you plan on publishing this app in the
quickbooks store, these URLS would contain the EULA agreement and the
Privacy Policy. If you are using this for private/personal use, you
can use a dummy URL for both. 

4) App URLs: If you plan on publishing the app, these are the URLs
that allow a user to connect or disconnect. For private/personal use,
you can use a dummy url for each. 

5) Categorize the app as "Accounting", and the Regulated Industry can
be "Payments / money movement" 

6) Complete the app assessment questionnaire.Note: In order to publish
ADT, adjusments and additions to the code may need to be made. 

7)Quickbooks will either approve or reject the app. If the app is
approved, your Production company keys and credentials will be
provided.

Obtaining Keys and Credentials: This includes ClientID, the Client
Secret, and the Redirect URI. The Client ID and Client Secret are
keys that identify your app and enable you to connect to your
company. The client ID is the public ID of the app and the Client
Secret is private identification string. The Redirect URI is url that
your browser is redirected to after logging in with ATD. the redirect
URI listed here should match the redirect in the ATD code.


ATD Configuration

NOTE: This code does not use any external package managers, like
composer. If you want to use composer, change the include
('../config.php') at the top of each file to the composer autoload
function. The include('../config.php') uses the autoloader config
file that acts as an SQL database query function. This is a way of
loading Quickbooks' functions, classes, variables, etc, that are
necessary for each piece of code. 


The following information is needed to configure ATD:

1) Redirect URI: Found in Keys and Credentials. This must be set in
the atdconfig file. Copy paste your redirect URI in the single
quotation marks that follow this string in the obi config
file: 'oauth_redirect_uri' => Your redirect should be a web address
that contains a redirect file that extracts the tokens from the log
in process, and then redirects the ATD client to the ATD server. This
must match the URI listed in your Production (or development)
settings. The current URI is set so that you can host the php server
locally, and connect on your webserver locally. To create your own
redirect URI website, you can use the  atd_uri files as a template,
then upload to the file to a website of your choosing: the file's web
address would be the redirect URI to use. If you want to separate the
client from the server, scrolldown.

2) Callback URI: This URI can be user-dependent. It must be set in the
atd_uri.php files. It redirects the web browser to send a GET request
to the PHP server to execute the callback procedure in ATD which
obtains the access code for the company. Insert the URI like this,
where the uri is between the single quotation marks : $b
= 'http://<ip address>:<port>/callback.php?>' The current URI is set
so that you can host the php server locally, and connect on your
webserver locally.

3) Home URI: This URI can be user dependent, and is the same as the
callback URI with no call to a php file.  Copy paste your Home URI in
the single quotation marks that follow this string in the obi config
file: 'homeURI' => 'http://<ip address>:<port>' The Home URI is used
at the end of the callback procedure to redirect the web server to
the home page.The current URI is set so that you can host the php
server locally, and connect on your webserver locally.


4) baseURL: Determines the type of company the app is accessing. To
access a sandbox company, the string is "development". To access a
production company, the string is "production". Include either string
in your atdconfig file like this: 'baseUrl' => "production" 



Flow of steps for ATD connection:

1) Install php, version 8.3 or greater.

2) Listen on PHP Server: Open a locally hosted php server in your
terminal within the ATD directory, using php -S <your ip
address>:<port to listen on>(ex: php -S 192.168.1.186:3000)

3) In your web browser, open a socket to this server by navigating to
<your ip address>:<port>

4) Submit your client ID and client Secret. You can access these in
your Development or Production settings of your app on Quickbooks.

5) Click Oath2 log in button, and log into your account, selecting the
company you'd like to access. Your redirect URI will bring the web
server back to the index page.

6) Fill out report settings and save them.

7) Click "Generate Report". This will take about 20 seconds.

8) Download generated reports. 

Separating client from server: ATD is set up to host the PHP server
locally, and connect locally. If you want to host your PHP server on
another machine, you must change the following URIs: Callback URI,
Home URI, and the redirect URI. The atd redirect files are currently
hosted online at the OSI website. The local redirect file will always
redirect the server to the local host. In order to host the php
server on another machine do this: Alter either the atd_186 or
atd_local code code in ATD to change the callback URI to a new new IP
address instead of localhost. Find a website to host your modified
redirect code the address of the code is the new redirect URI. Copy
paste this address into your app settings online, and into the
atd_config file. Then, change your Home URI in your atd_config file
to reflect the new IP address.